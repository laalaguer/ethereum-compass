:github_url: https://github.com/laalaguer/ethereum-compass/blob/master/ch5/build.rst

å¯åŠ¨ä¸€æ¡ä»¥å¤ªåŠç§é“¾
==========================

ä»¥å¤ªåŠç½‘ç»œåˆ†ä¸ºä¸»ç½‘ã€æµ‹è¯•ç½‘ã€‚è¿™ä¸¤ä¸ªç½‘ç»œéƒ½æ˜¯å…¬å¼€çš„é“¾ï¼Œä¸ºä¸–ç•Œæ‰€æœ‰å¼€å‘è€…å’Œç”¨æˆ·æ‰€ç”¨ã€‚

æˆ‘ä»¬ä»Šå¤©çš„å­¦ä¹ è“æœ¬æ˜¯ä»¥å¤ªåŠçš„ç§æœ‰ç½‘ç»œï¼Œæˆ–è€…ç§°ä¸ºç§é“¾ã€‚ç§é“¾å’Œå…¬é“¾æ˜¯ä¸äº’é€šçš„ï¼Œé€šè¿‡ç½‘ç»œè¿›è¡Œéš”ç¦»ã€‚ä»¥å¤ªåŠæºä»£ç åŠè½¯ä»¶éƒ½æ˜¯å¼€æºçš„ï¼Œä»»ä½•äººéƒ½å¯ä»¥æ‹·è´ä¸€ä»½æºä»£ç å¹¶ä¸”è¿è¡Œè‡ªå·±çš„ä»¥å¤ªåŠç§é“¾ã€‚ä»¥ä¸‹æ˜¯æ¥å…¥ä¸åŒçš„ç½‘ç»œæ‰€èŠ±è´¹çš„ä¸‹è½½æ•°æ®é‡çš„å¯¹æ¯”ã€‚

  - ä¸»ç½‘(main net)--ä¸‹è½½é‡ >1TB çš„åŒºå—é“¾æ•°æ®ï¼Œå…±éœ€3-5å¤©æ—¶é—´ã€‚
  - æµ‹è¯•ç½‘(test net)--ä¸‹è½½é‡ ~60GBçš„ä»£å·ä¸ºRopstençš„æµ‹è¯•ç½‘æ•°æ®ï¼Œçº¦10å°æ—¶ã€‚
  - ç§é“¾(Private net)--æ— éœ€ä¸‹è½½ï¼Œåˆ›ä¸–åç­‰å¾…æ•°åˆ†é’Ÿå³å¯æ­£å¸¸è¿è½¬ã€‚

æˆ‘ä»¬å°†ä»¥æ„å»ºç§æœ‰ç½‘ç»œï¼Œäº²æ‰‹åˆ›ä¸–ä¸€æ¡ä»¥å¤ªåŠç§é“¾çš„å½¢å¼è¿›è¡Œä¸‹é¢çš„æ•™å­¦ã€‚


.. topic:: è®¾ç«‹å·¥ä½œç›®å½•

   æˆ‘ä»¬è®¾ç«‹ä¸€ä¸ªæ–°çš„å·¥ä½œç›®å½•å¹¶æ–°å»ºä¸€ä¸ªåˆ›ä¸–å¯åŠ¨é…ç½®æ–‡ä»¶ã€‚

.. code-block:: bash
   :linenos:

   mkdir ether-test
   cd ether-test
   touch gensis.json
   mkdir db

è‡³æ­¤ï¼Œæˆ‘ä»¬çš„åˆ›ä¸–ç›®å½•ç”Ÿæˆå®Œæ¯•ï¼Œç›®å½•ç»“æ„å¦‚ä¸‹ã€‚

.. code-block:: bash

   ether-test/ 
   â”œâ”€â”€ db
   â””â”€â”€ gensis.json

   1 directory, 1 file


.. topic:: ç¼–è¾‘åˆ›ä¸–é…ç½®

   å¦‚æœè¯»è€…å›å¿†èµ· :ref:`reference-total-supply` çš„è®²è§£ï¼Œä¸æ¯”ç‰¹å¸ä¸åŒï¼Œä»¥å¤ªåŠçš„åˆ›ä¸–å°±å·²ç»åˆ†é…äº†çº¦70%çš„ä»¥å¤ªå¸ï¼Œéšåæ‰è¿›å…¥æŒ–çŸ¿è¿‡ç¨‹ï¼Œå¤§å®¶ç«äº‰æŒ–çŸ¿åˆ†é…å‰©ä½™çš„å¸ã€‚æˆ‘ä»¬ç§é“¾ä¹ŸåŒæ ·å¯ä»¥é€šè¿‡åˆ›ä¸–æ–¹æ³•åˆ†é…å¥½ä¸€äº›ä»¥å¤ªå¸ä¾›æµ‹è¯•ä½¿ç”¨ï¼Œæˆ–è€…ä»é›¶å¼€å§‹ä¸€ç‚¹ä¸€ç‚¹é€šè¿‡æŒ–çŸ¿çš„æ–¹å¼æŒ–æ˜ä»¥å¤ªå¸ã€‚

   åˆ›ä¸–é…ç½®å°±æ˜¯ä¾›ä»¥å¤ªåŠç§æœ‰é“¾ç¬¬ä¸€æ¬¡å¯åŠ¨æ—¶æ‰€ä½¿ç”¨ï¼Œåˆ›ä¸–åŒºå—æ˜¯æœ€ç‰¹æ®Šçš„åŒºå—ï¼Œå®ƒæ²¡æœ‰å‰ä¸€ä¸ªåŒºå—ï¼Œå› ä¸ºå®ƒè‡ªå·±æ˜¯ç¬¬ä¸€ä¸ªå—ã€‚æˆ‘ä»¬ä¸‹é¢æ¥é…ç½®åˆ›ä¸–åŒºå— ``gensis.json`` æ–‡ä»¶ã€‚

.. code-block:: javascript

   // gensis.json
   {
     "config": {
         "chainId": 987,
         "homesteadBlock": 0,
         "eip155Block": 0,
         "eip158Block": 0
     },
     "difficulty": "0x400",
     "gasLimit": "0x8000000",
     "alloc": {}
   }

ä»¥ä¸Šå°±æ˜¯ä¸€ä»½æœ€å°å¯è¡Œçš„åˆ›ä¸–åŒºå—é…ç½®ï¼ŒåŒ…å«äº†åŒºå—é“¾é…ç½®ï¼ŒæŒ–çŸ¿éš¾åº¦è®¾ç½®ï¼Œå•ä¸€åŒºå—æœ€å¤§åŒ…å« Gas çš„ä¸Šé™ï¼Œä»¥åŠä¸€ä¸ªç©ºç½®çš„åˆ›ä¸–å¸åˆ†é…åŒºalloc(æ„å‘³ç€æ²¡æœ‰é¢„å…ˆåˆ†é…ä»¥å¤ªå¸)ã€‚å½“ç„¶ï¼Œä¹Ÿå¯ä»¥æ‰©å……ä¸€äº›å¯åŠ¨çš„å…¶ä»–å‚æ•°è¯¸å¦‚æ—¶é—´æˆ³ä»¥åŠå‰ä¸€åŒºå—å“ˆå¸Œç­‰ï¼Œè¿™äº›éƒ½æ˜¯éå¿…å¡«çš„ã€‚å®Œæ•´ç‰ˆçš„ ``gensis.json`` å¦‚ä¸‹æ‰€ç¤ºã€‚

.. code-block:: javascript

   {
     "config": {
         "chainId": 987,
         "homesteadBlock": 0,
         "eip155Block": 0,
         "eip158Block": 0
     },
     "difficulty": "0x400",
     "gasLimit": "0xffffffff",
     // å¯é€‰å¡«çš„å‚æ•°
     "coinbase": "0x0000000000000000000000000000000000000000",
     "extraData": "0x00",
     "nonce": "0x0000000000000001",
     "mixhash": "0x0000000000000000000000000000000000000000000000000000000000000000",
     "parentHash": "0x0000000000000000000000000000000000000000000000000000000000000000",
     "timestamp": "0x00",
     "alloc": {
       "430e986e0cca10a174baad96871ec9cb308c6d05": {"balance": "111111"} 
     }
   }

å„ä¸ªå­—æ®µè§£é‡Šå¦‚ä¸‹ï¼š

+----------------+-------------------------------------------------------------------------------------------------------------------+
| å¿…å¡«           |                                                                                                                   |
+----------------+-------------------------------------------------------------------------------------------------------------------+
| chainId        | è‡ªå®šä¹‰ç§é“¾çš„ç½‘ç»œIDï¼Œä¸åŒçš„ç½‘ç»œIDæ— æ³•äº’è”é€šè®¯ï¼Œä»¥å¤ªåŠå…¬é“¾ID ä¸º1ï¼Œæˆ‘ä»¬è®¾ç½®ä¸º987ä»¥é˜²æ­¢ä¸ç½‘ç»œä¸­å…¶ä»–ç§é“¾å†²çªã€‚         |
+----------------+-------------------------------------------------------------------------------------------------------------------+
| homesteadBlock | æ˜¯å¦ä¸ºHomeSteadç‰ˆæœ¬çš„åŒºå—ï¼Œè®¾ç½®ä¸º0è¡¨æ˜æ˜¯ã€‚                                                                        |
+----------------+-------------------------------------------------------------------------------------------------------------------+
| eip155Block    | EIP155 [#]_ æ˜¯ä¸€ä¸ªä»¥å¤ªåŠåˆ†å‰æè®®ï¼Œä¸ºäº†å’Œä»¥å‰çš„ä»¥å¤ªåŠç»å…¸ETC é“¾æ¡åˆ†å‰è€Œå­˜åœ¨ï¼Œæˆ‘ä»¬ç§é“¾ä¸éœ€è¦å®ƒï¼Œè®¾ä¸º0ã€‚             |
+----------------+-------------------------------------------------------------------------------------------------------------------+
| eip158Block    | EIP158 [#]_ æ˜¯ä¸€ä¸ªä»¥å¤ªåŠåˆ†å‰æè®®ï¼Œä¸ºäº†è§£å†³ä¹‹å‰ä»¥å¤ªåŠç©ºè´¦æˆ·é€ æˆæ•ˆç‡ä½ä¸‹çš„åè®®æ¼æ´è€Œåˆ†å‰ï¼Œæˆ‘ä»¬ç§é“¾ä¸éœ€è¦å®ƒï¼Œè®¾ä¸º0ã€‚ |
+----------------+-------------------------------------------------------------------------------------------------------------------+
| difficulty     | è®¾ç½®å½“å‰åŒºå—éš¾åº¦ï¼Œè‹¥éš¾åº¦è¿‡å¤§æŒ–çŸ¿å°±å¾ˆæ…¢ï¼Œæˆ‘ä»¬è®¾ç½®è¾ƒå°å€¼ã€‚                                                          |
+----------------+-------------------------------------------------------------------------------------------------------------------+
| gasLimit       | å•ä¸€åŒºå—æœ€å¤§ gas æ¶ˆè€—ä¸Šé™ï¼Œç”¨æ¥é™åˆ¶èƒ½å¤Ÿæ‰“åŒ…è¿›å…¥å—çš„äº¤æ˜“æ•°é‡ä¸ä¿¡æ¯æ€»å’Œï¼Œæˆ‘ä»¬åœ¨å­¦ä¹ ä¸­å¯ä»¥è®¾ç½®ä¸ºæœ€å¤§ã€‚               |
+----------------+-------------------------------------------------------------------------------------------------------------------+
| é€‰å¡«           |                                                                                                                   |
+----------------+-------------------------------------------------------------------------------------------------------------------+
| coinbase       | æ‰“åŒ…è¯¥å—çš„çŸ¿å·¥çš„å¥–åŠ±åœ°å€ï¼Œå› ä¸ºæ˜¯åˆ›ä¸–å—ï¼Œå¯è®¾ä¸º0åœ°å€ã€‚                                                             |
+----------------+-------------------------------------------------------------------------------------------------------------------+
| extraData      | æ‰“åŒ…è¯¥å—æ—¶çŸ¿å·¥è®°å½•çš„ç¬”è®°ã€‚                                                                                        |
+----------------+-------------------------------------------------------------------------------------------------------------------+
| nonce          | æ‰“åŒ…è¯¥å—æ—¶çŸ¿å·¥æŒ–çŸ¿æ‰€ç”¨åˆ°çš„Ethashè¾“å…¥å‚æ•°nonceã€‚                                                                   |
+----------------+-------------------------------------------------------------------------------------------------------------------+
| mixHash        | ä¸nonceé…åˆç”¨äºæŒ–çŸ¿ï¼Œåˆ›ä¸–åŒºæ— å‰ä¸€ä¸ªåŒºå—ï¼Œå¯ä¸å¡«ã€‚                                                                 |
+----------------+-------------------------------------------------------------------------------------------------------------------+
| parentHash     | å‰ä¸€ä¸ªåŒºå—å¤´çš„å“ˆå¸Œå€¼ï¼Œåˆ›ä¸–åŒºå—æ— å‰ä¸€ä¸ªåŒºå—ï¼Œè®¾ä¸º0ã€‚                                                               |
+----------------+-------------------------------------------------------------------------------------------------------------------+
| timestamp      | æ‰“åŒ…è¯¥å—çš„æ—¶é—´æˆ³ï¼Œç¬¦åˆUnix Timestampæ ‡å‡†ï¼Œè®¾ä¸º0ã€‚                                                                 |
+----------------+-------------------------------------------------------------------------------------------------------------------+
| alloc          | åˆ›ä¸–æ—¶å„è´¦æˆ·åˆ†é…ä»¥å¤ªå¸çš„æ•°é‡ï¼Œä¸æƒ³åˆ†é…åˆ™å¿½ç•¥ã€‚                                                                    |
+----------------+-------------------------------------------------------------------------------------------------------------------+


åæ–‡å°†ä»¥ç®€åŒ–ç‰ˆæœ¬çš„ ``gensis.json`` ä½œä¸ºåˆ›ä¸–ç§æœ‰é“¾çš„åŸºç¡€ã€‚

.. topic:: åˆå§‹åŒ–åˆ›ä¸–é…ç½®

   æˆ‘ä»¬å·²ç»å‡†å¤‡å¥½äº†åˆ›ä¸–çš„é…ç½®ï¼Œæ¥ä¸‹æ¥å°±æ˜¯å°†è¯¥é“¾æ¡çš„é…ç½®åˆå§‹åŒ–ï¼Œå½¢æˆåŒºå—é“¾çš„èµ·ç‚¹ï¼Œåˆå§‹åŒ–ä¹‹åæˆ‘ä»¬å°±æœ‰äº†ç¬¬ä¸€ä¸ªåŒºå—ï¼Œæ¥ä¸‹æ¥å°±å¯ä»¥æ ¹æ®ç¬¬ä¸€ä¸ªåŒºå—æ¥æŒ–æ˜ç¬¬äºŒä¸ªåŒºå—äº†ã€‚

è¿›å…¥ ``ether-test`` ç›®å½•ï¼Œæ‰§è¡Œåˆå§‹åŒ–ã€‚

.. code-block:: bash
   :linenos:

   cd ether-test
   geth --datadir "./db" init gensis.json
   >
   INFO [09-16|15:04:53.320] Maximum peer count                       
   INFO [09-16|15:04:53.326] Allocated cache and file handles         
   INFO [09-16|15:04:53.329] Writing custom genesis block
   INFO [09-16|15:04:53.329] Persisted trie from memory database      
   INFO [09-16|15:04:53.329] Successfully wrote genesis state         
   INFO [09-16|15:04:53.329] Allocated cache and file handles         
   INFO [09-16|15:04:53.331] Writing custom genesis block
   INFO [09-16|15:04:53.331] Persisted trie from memory database      
   INFO [09-16|15:04:53.331] Successfully wrote genesis state         


æ­¤æ—¶æˆ‘ä»¬çœ‹åˆ°æ§åˆ¶å°ä¸Šè¾“å‡ºäº† *â€œSuccessfully wrote genesis stateâ€* æ„å‘³ç€æˆ‘ä»¬çš„åˆå§‹åŒ–å·²ç»æˆåŠŸï¼Œè¶æ­¤æœºä¼šæˆ‘ä»¬äº†è§£ä¸€ä¸‹ç©¶ç«Ÿæœ¬åœ°ç›®å½•å‘ç”Ÿäº†æ€æ ·çš„å˜åŒ–ï¼š

.. code-block:: bash

   ether-test/
   â”œâ”€â”€ db
   â”‚   â”œâ”€â”€ geth
   â”‚   â”‚   â”œâ”€â”€ chaindata
   â”‚   â”‚   â”‚   â”œâ”€â”€ 000001.log
   â”‚   â”‚   â”‚   â”œâ”€â”€ CURRENT
   â”‚   â”‚   â”‚   â”œâ”€â”€ LOCK
   â”‚   â”‚   â”‚   â”œâ”€â”€ LOG
   â”‚   â”‚   â”‚   â””â”€â”€ MANIFEST-000000
   â”‚   â”‚   â””â”€â”€ lightchaindata
   â”‚   â”‚       â”œâ”€â”€ 000001.log
   â”‚   â”‚       â”œâ”€â”€ CURRENT
   â”‚   â”‚       â”œâ”€â”€ LOCK
   â”‚   â”‚       â”œâ”€â”€ LOG
   â”‚   â”‚       â””â”€â”€ MANIFEST-000000
   â”‚   â””â”€â”€ keystore
   â””â”€â”€ gensis.json
   
   5 directories, 11 files


åœ¨ db ç›®å½•æ•°æ®åº“ï¼Œç¨‹åºè‡ªåŠ¨æ–°å»ºäº† geth ç›®å½•ã€‚
è¯¥ç›®å½•å­˜æ”¾äº†åŒºå—é“¾çš„æ‰€æœ‰è¿è¡Œæ—¶äº§ç”Ÿçš„åŒºå—é“¾æ•°æ®ã€æ—¥å¿—ã€ä¸–ç•ŒçŠ¶æ€å¹¶éšç€åŒºå—é“¾å¢é•¿è€Œå æ®æ›´å¤šå­˜å‚¨ç¡¬ç›˜ç©ºé—´ã€‚
å®ƒå†…éƒ¨çš„ä¸¤ä¸ªå­ç›®å½•å­˜å‚¨äº†å…·ä½“çš„åŒºå—é“¾æ•°æ®ã€‚
db ç›®å½•ä¸‹è¿˜æœ‰ä¸€ä¸ª keystore ç›®å½•ã€‚è¯¥ç›®å½•ä¸‹ä¿å­˜äº†å„ä¸ªè´¦æˆ·çš„ç§é’¥çš„åŠ å¯†åçš„æ–‡ä»¶ï¼Œ
ä¸æˆ‘ä»¬å­¦ä¹ è¿‡çš„ :ref:`reference-keystore` ç›¸å¯¹åº”ã€‚åªæœ‰åœ¨ç­¾åçš„æ—¶å€™ç”¨æˆ·æ‰ä¼šè§£é” keystore æ‰§è¡Œç­¾åæ“ä½œã€‚

.. topic:: å¯åŠ¨Geth èŠ‚ç‚¹

   ä¸€åˆ‡å‡†å¤‡å°±ç»ªï¼Œå¼—å…°è‚¯æ–¯å¦çš„å·¨äººé©¬ä¸Šå°±è¦è‹é†’ï¼Œåœ¨æˆ‘ä»¬ç°åœ¨çš„ç¯å¢ƒä¸‹ï¼Œéœ€è¦å¯åŠ¨ä¸€ä¸ª Geth èŠ‚ç‚¹æ¥æ¥å…¥ç§é“¾ç½‘ç»œï¼ˆå®é™…ä¸Šä¹Ÿæ˜¯è¿™ä¸ªç§é“¾ç½‘ç»œçš„å”¯ä¸€ä¸€ä¸ªèŠ‚ç‚¹ï¼‰ï¼Œè´Ÿè´£åœ¨åˆ›ä¸–å—åæŒ–å‡ºç¬¬ä¸€ä¸ªå—ã€‚è¯¥èŠ‚ç‚¹ä¹Ÿæ˜¯æˆ‘ä»¬ä¸ä»¥å¤ªåŠç§é“¾é€šä¿¡çš„èŠ‚ç‚¹æœåŠ¡å™¨ã€‚ä¸‹é¢æˆ‘ä»¬æ¥å¯åŠ¨è¿™æ ·ä¸€ä¸ªèŠ‚ç‚¹ã€‚

.. code-block:: bash
   :linenos:

   cd ether-test
   geth --datadir ./db/ --rpc --rpcaddr=127.0.0.1 --rpcport 8545 --rpccorsdomain "*" \
      --rpcapi "eth,net,web3,personal,admin,shh,txpool,debug,miner" \
      --nodiscover --maxpeers 30 --networkid 198989 --port 30303 \
      --mine --minerthreads 1 \
      --etherbase "0x7df9a875a174b3bc565e6424a0050ebc1b2d1d82" \
      console

gethå¯åŠ¨æ—¶å‘½ä»¤è¡Œå‚æ•°è§£é‡Šå¦‚ä¸‹è¡¨:

+-----------------+------------------------------------------------------------------------------------+
| å‚æ•°            | è§£é‡Š                                                                               |
+-----------------+------------------------------------------------------------------------------------+
| --rpc           | å¼€å¯JSON-RPC æœåŠ¡ï¼Œå¯ä¾›è°ƒç”¨/è°ƒè¯•è®¿é—®ã€‚                                             |
+-----------------+------------------------------------------------------------------------------------+
| --rpcaddr       | æœ¬åœ°ç›‘å¬JSON-RPCçš„åœ°å€ã€‚                                                           |
+-----------------+------------------------------------------------------------------------------------+
| --rpcport       | æœ¬åœ°ç›‘å¬JSON-RPCçš„ç«¯å£ã€‚                                                           |
+-----------------+------------------------------------------------------------------------------------+
| --prccorsdomain | æœ¬åœ°ç›‘å¬JSON-RPCå…è®¸çš„åŸŸåè®¿é—®ã€‚                                                   |
+-----------------+------------------------------------------------------------------------------------+
| --rpcapi        | å…è®¸æä¾›çš„RPCæœåŠ¡æ¨¡å—ï¼Œåœ¨ç¤ºä¾‹ä¸­é€‰æ‹©äº†æ•°ä¸ªæ¨¡å—åŠ è½½ã€‚                                |
+-----------------+------------------------------------------------------------------------------------+
| --nodiscover    | å…³é—­è‡ªåŠ¨å‘ç°èŠ‚ç‚¹ï¼Œç§æœ‰é“¾å¼€å‘æ—¶é˜²æ­¢ä»–äººæ„å¤–æ¥å…¥ï¼Œå¯é€‰æ‹©å…³é—­è¯¥é€‰é¡¹é¿å…ä»–äººåŠ å…¥ç½‘ç»œã€‚ |
+-----------------+------------------------------------------------------------------------------------+
| --maxpeers      | å…è®¸æœ€å¤§èŠ‚ç‚¹é“¾æ¥æ•°ç›®ã€‚                                                             |
+-----------------+------------------------------------------------------------------------------------+
| --networkid     | æŒ‡å®šä»¥å¤ªåŠç½‘ç»œIDã€‚                                                                 |
+-----------------+------------------------------------------------------------------------------------+
| --port          | ç›‘å¬ä»¥å¤ªåŠèŠ‚ç‚¹ä¹‹é—´P2Pæ¶ˆæ¯çš„TCP/UDPç«¯å£ï¼Œé»˜è®¤30303ã€‚                                |
+-----------------+------------------------------------------------------------------------------------+
| --mine          | èŠ‚ç‚¹å¯åŠ¨æŒ–çŸ¿åŠŸèƒ½ï¼Œå‚ä¸æŒ–çŸ¿ã€‚                                                       |
+-----------------+------------------------------------------------------------------------------------+
| --minerthreads  | æŒ–çŸ¿çš„å¤šçº¿ç¨‹é…ç½®ï¼Œä¾‹å­ä¸­é…ç½®ä¸º1ä¸ªçº¿ç¨‹ã€‚                                            |
+-----------------+------------------------------------------------------------------------------------+
| --etherbase     | è‹¥å¯åŠ¨æŒ–çŸ¿åŠŸèƒ½ï¼ŒæŒ–çŸ¿å¥–åŠ±çš„æ¥å—åœ°å€ï¼Œä¾‹å­ä¸­æˆ‘ä»¬éšä¾¿å¡«äº†ä¸€ä¸ªã€‚                       |
+-----------------+------------------------------------------------------------------------------------+
| console         | (å¯é€‰) å¯åŠ¨åè¿›å…¥å‘½ä»¤è¡Œæ¨¡å¼ï¼Œç›´æ¥è¾“å…¥å‘½ä»¤äº’åŠ¨æ“ä½œã€‚                                |
+-----------------+------------------------------------------------------------------------------------+


è¾“å…¥å›è½¦ï¼Œå¯åŠ¨æˆåŠŸï¼æ­¤æ—¶æ§åˆ¶å°ä¼šè¾“å‡ºä¸€ç»„æ—¥å¿—ä¿¡æ¯å¹¶æœ‰å¦‚ä¸‹çš„æ¬¢è¿ä¿¡æ¯ï¼š

.. code-block:: bash

   INFO [09-16|15:33:26.872] Maximum peer count                       ETH=30 LES=0 total=30
   INFO [09-16|15:33:26.879] Starting peer-to-peer node               instance=Geth/v1.8.14-stable/darwin-amd64/go1.10.3
   INFO [09-16|15:33:26.879] Allocated cache and file handles         database=/ether-test/db/geth/chaindata cache=768 handles=1024
   INFO [09-16|15:33:26.889] Initialised chain configuration          config="{ChainID: 987 Homestead: 0 DAO: <nil> DAOSupport: false EIP150: <nil> EIP155: 0 EIP158: 0 Byzantium: <nil> Constantinople: <nil> Engine: unknown}"
   INFO [09-16|15:33:26.889] Disk storage enabled for ethash caches   dir=/ether-test/db/geth/ethash count=3
   INFO [09-16|15:33:26.889] Disk storage enabled for ethash DAGs     dir=/.ethash                   count=2
   INFO [09-16|15:33:26.889] Initialising Ethereum protocol           versions="[63 62]" network=198989
   INFO [09-16|15:33:26.890] Loaded most recent local header          number=0 hash=4e048dâ€¦366eb4 td=1024
   INFO [09-16|15:33:26.890] Loaded most recent local full block      number=0 hash=4e048dâ€¦366eb4 td=1024
   INFO [09-16|15:33:26.890] Loaded most recent local fast block      number=0 hash=4e048dâ€¦366eb4 td=1024
   INFO [09-16|15:33:26.890] Regenerated local transaction journal    transactions=0 accounts=0
   INFO [09-16|15:33:26.890] Starting P2P networking
   ...

.. Note::
   
   Gethå¯åŠ¨æ—¶ä¼šå ç”¨æ•°ä¸ªè®¡ç®—æœºç«¯å£ï¼Œè¯·ç¡®ä¿å®ƒä»¬å¯ç”¨ã€‚
    - 8545 TCPç«¯å£ -- ä¾›åŸºäº HTTPçš„JSON-RPC APIé€šä¿¡ä½¿ç”¨ã€‚
    - 8546 TCPç«¯å£ -- ä¾›åŸºäº WebSocketçš„JSON-RPC APIé€šä¿¡ä½¿ç”¨ã€‚
    - 30303 TCP/UDPç«¯å£ -- æä¾› P2P åè®®åŒæ­¥æ•°æ®å—è¿è¡Œä»¥å¤ªåŠç½‘ç»œã€‚
    - 30304 UDPç«¯å£-- P2Pé€šä¿¡ä¸­æ–°èŠ‚ç‚¹å‘ç°æœºåˆ¶æ‰€ç”¨ã€‚

åœ¨è¾ƒæ…¢çš„ç¡¬ç›˜(éSSD)æˆ–è€…åœ¨è™šæ‹Ÿæœºç¯å¢ƒä¸­ï¼ŒæŒ–å‡ºä¸€ä¸ªåŒºå—çš„æ—¶é—´ä¼šéå¸¸é•¿ï¼Œçº¦éœ€è¦ 5~10 åˆ†é’Ÿæ—¶é—´ï¼Œåœ¨é…ç½®äº† SSD ç¡¬ç›˜çš„æ–°æ¬¾ Macbook ä¸Šå‡ ä¹æ˜¯ç¬é—´å°±èƒ½æŒ–å‡ºä¸€ä¸ªåŒºå—ã€‚æŒ–å‡ºåŒºå—æ—¶ä¼šæœ‰å°é”¤å­çš„æ ‡è®°ï¼Œä¼šæ˜¾ç¤ºå¦‚ä¸‹çš„æ§åˆ¶å°è¾“å‡ºï¼š

.. code-block:: bash

   INFO [09-16|15:34:03.651] Successfully sealed new block            number=1 hash=589650â€¦007f89 elapsed=8.569s
   INFO [09-16|15:34:03.651] ğŸ”¨ mined potential block                  number=1 hash=589650â€¦007f89
   INFO [09-16|15:34:03.652] Commit new mining work                   number=2 uncles=0 txs=0 gas=0 fees=0 elapsed=125.154Âµs
   INFO [09-16|15:34:03.838] Successfully sealed new block            number=2 hash=fb5f62â€¦81e023 elapsed=186.718ms
   INFO [09-16|15:34:03.839] ğŸ”¨ mined potential block                  number=2 hash=fb5f62â€¦81e023
   INFO [09-16|15:34:03.839] Commit new mining work                   number=3 uncles=0 txs=0 gas=0 fees=0 elapsed=142.96Âµs
   INFO [09-16|15:34:04.092] Successfully sealed new block            number=3 hash=4fb51dâ€¦5c5e1c elapsed=252.862ms
   INFO [09-16|15:34:04.092] ğŸ”¨ mined potential block                  number=3 hash=4fb51dâ€¦5c5e1c

æˆ‘ä»¬å¯ä»¥é™†ç»­çœ‹åˆ°è¯¸å¦‚ ``number=1ï¼Œnumber=2`` çš„è¾“å‡ºï¼Œè¿™è¡¨æ˜æˆ‘ä»¬å·²ç»æˆåŠŸåœ°æŒ–æ˜å‡ºäº†ç¬¬1ï¼Œ2ï¼Œ3â€¦ä¸ªåŒºå—ï¼Œè€ŒåŒºå—çš„ ``uncles=0`` ï¼Œè¯´æ˜å¹¶æ²¡æœ‰ **å”å—** äº§ç”Ÿï¼Œå¤ä¹ æˆ‘ä»¬ä¹‹å‰æ‰€å­¦çš„çŸ¥è¯† :ref:`ref-dig` ï¼Œåœ¨ç½‘ç»œä¸­æœ‰ä¸”ä»…æœ‰æˆ‘ä»¬ä¸€ä¸ªæŒ–çŸ¿èŠ‚ç‚¹çš„æ—¶å€™ï¼Œæ²¡æœ‰ç«äº‰å¯¹æ‰‹äº§ç”ŸåŒä¸€ä¸ªé«˜åº¦çš„å—ï¼Œæ‰€ä»¥æ˜¾è€Œæ˜“è§çš„æ˜¯ä¸ä¼šäº§ç”Ÿå­¤ç«‹çš„å—ï¼Œä¹Ÿå°±ä¸ä¼šäº§ç”Ÿå”å—äº†ã€‚

è‡³æ­¤ï¼Œæ§åˆ¶å°æŒç»­åœ¨è¾“å‡ºæŒ–çŸ¿ç›¸å…³ä¿¡æ¯ã€‚ä½ çš„ç§é“¾å·²ç»ç¨³å®šè¿è¡Œã€‚ç”±äºæˆ‘ä»¬å¯åŠ¨æ—¶ ``etherbase`` å‚æ•°éšä¾¿è®¾ç½®äº†ä¸€ä¸ªæŒ–çŸ¿çŸ¿å·¥å¥–åŠ±åœ°å€ï¼Œæ‰€ä»¥æŒ–å‡ºçš„åŒºå—å¥–åŠ±éƒ½å‘é€åˆ°äº†é‚£ä¸ªåœ°å€ï¼Œä½†æˆ‘ä»¬å¹¶æ²¡æœ‰æŒæœ‰è¿™ä¸ªåœ°å€ï¼Œè¿™ç­‰äºç™½ç™½æµªè´¹äº†ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬æ¥ä¸Gethé€šä¿¡å¹¶ä¸”è®©å®ƒæš‚åœä¸€ä¸‹æŒ–çŸ¿ï¼Œç­‰æˆ‘ä»¬æ–°å»ºå¥½äº†è´¦æˆ·ä¹‹åå†ç»§ç»­æŒ–ã€‚

æˆ‘ä»¬é‡æ–°å¼€ä¸€ä¸ªæ§åˆ¶å°çª—å£ï¼Œå¹¶è¿æ¥ä¸Šæ­£åœ¨è¿è¡Œçš„ Gethï¼Œè®©å…¶åœä¸‹æŒ–çŸ¿ã€‚

.. code-block:: bash
   :linenos:
   :emphasize-lines: 1,2,12

   cd ether-test
   geth --datadir ./db attach ipc:./db/geth.ipc
   >
   Welcome to the Geth JavaScript console!
   
   instance: Geth/v1.8.14-stable/darwin-amd64/go1.10.3
   coinbase: 0x7df9a875a174b3bc565e6424a0050ebc1b2d1d82
   at block: 90 (Sun, 16 Sep 2018 15:56:37 CST)
    datadir: /ether-test/db
    modules: admin:1.0 debug:1.0 eth:1.0 ethash:1.0 miner:1.0 net:1.0 personal:1.0 rpc:1.0 txpool:1.0 web3:1.0
   
   > miner.stop()
   true

æˆ‘ä»¬ä½¿ç”¨ ``miner.stop()`` å‘½ä»¤æ¥åœæ­¢æŒ–çŸ¿è¡Œä¸ºï¼Œæ­¤æ—¶å¯ä»¥çœ‹åˆ°ä¹‹å‰å¯åŠ¨çš„ Geth èŠ‚ç‚¹çš„æ§åˆ¶å°è¾“å‡ºå·²ç»åœä¸‹ï¼Œæ²¡æœ‰æ–°åŒºå—è¢«æŒ–æ˜ã€‚éœ€è¦é‡å¯æŒ–çŸ¿ï¼Œæ‰§è¡Œ ``miner.start()`` å³å¯ã€‚

è‡³æ­¤æˆ‘ä»¬å›é¡¾ä¸€ä¸‹ã€‚æˆ‘ä»¬å·²ç»å¯åŠ¨äº†ä¸€æ¡ä»¥å¤ªåŠç§é“¾ï¼Œåœ¨å¯åŠ¨ä¹‹æ—¶æˆ‘ä»¬é€‰å¡«äº†ä¸€äº›å‚æ•°ã€‚

.. centered:: --rpcapi "eth,net,web3,personal,admin,shh,txpool,debug,miner"

è¿™äº›å‚æ•°éƒ½æ˜¯æŒ‡å®šGethå®¢æˆ·ç«¯è£…è½½å“ªäº›åŠŸèƒ½æ¨¡å—çš„ï¼Œè¿™äº›æ¨¡å—æœ‰çš„æ˜¯æŒ–çŸ¿æ¨¡å—ï¼Œæœ‰çš„æ˜¯è´¦æˆ·æ¨¡å—ï¼Œæ ¹æ®ä½¿ç”¨è€…åå¥½å¯ä»¥é€‰æ‹©æ€§åœ°å¯ç”¨ï¼Œé€‚å½“åœ°å¢å‡å½“å‰èŠ‚ç‚¹å…·å¤‡çš„èƒ½åŠ›ã€‚å…·ä½“çš„æ¨¡å—è§£é‡Šå¦‚ä¸‹è¡¨ [#]_ ã€‚

+----------+------------------------------------------------------------------+
| æ¨¡å—     | è§£é‡Š                                                             |
+----------+------------------------------------------------------------------+
| personal | è´¦æˆ·ç›¸å…³æ“ä½œ--æ–°å»ºè´¦æˆ·ã€é”å®šè´¦æˆ·ã€å‘é€ç­¾åäº¤æ˜“ç­‰ã€‚               |
+----------+------------------------------------------------------------------+
| admin    | èŠ‚ç‚¹ç®¡ç†ç›¸å…³--èŠ‚ç‚¹æ•°æ®å­˜å‚¨ã€ç½‘ç»œçŠ¶å†µã€API å¼€æ”¾çŠ¶å†µç­‰ã€‚           |
+----------+------------------------------------------------------------------+
| txpool   | äº¤æ˜“æ± ç›¸å…³--äº¤æ˜“æ± ç­‰å¾…æƒ…å†µï¼ŒæŸ¥çœ‹æŸäº¤æ˜“è¯¦æƒ…ç­‰ã€‚                   |
+----------+------------------------------------------------------------------+
| debug    | å¼€å‘è°ƒè¯•ç›¸å…³--è¿½è¸ªåŒºå—çŠ¶å†µï¼Œåˆ†æåŒºå—è¯¦æƒ…ã€CPU çŠ¶å†µæ£€æµ‹ç­‰ã€‚       |
+----------+------------------------------------------------------------------+
| miner    | æŒ–çŸ¿ç›¸å…³--æ›´æ”¹å¥–åŠ±æ”¶æ¬¾åœ°å€ã€å¼€å¯/å…³é—­æŒ–çŸ¿åŠŸèƒ½ã€è®¾ç½® gas è´¹ç”¨ç­‰ã€‚ |
+----------+------------------------------------------------------------------+
| web3     | åŒ…å«äº†ä»¥ä¸Šæ¨¡å—çš„æ€»å…¥å£ï¼Œè¿˜åŒ…å«å•ä½æ¢ç®—å‡½æ•°ã€‚                     |
+----------+------------------------------------------------------------------+
| eth      | æä¾›äº†æ“ä½œåŒºå—é“¾çš„ç›¸å…³æ–¹æ³•ã€‚                                     |
+----------+------------------------------------------------------------------+
| shh      | æä¾›äº†åˆ†å¸ƒå¼ç½‘ç»œ P2P Whisperé€šä¿¡åè®®çš„ç›¸å…³æ–¹æ³•                   |
+----------+------------------------------------------------------------------+

.. [#] Vitalik Buterin (2016), â€˜Simple replay attack protectionâ€™, Available at: https://github.com/ethereum/EIPs/blob/master/EIPS/eip-155.md
.. [#] Vitalik Buterin (2016), â€˜State clearingâ€™, Available at: https://github.com/ethereum/EIPs/blob/master/EIPS/eip-158.md
.. [#] ç¬”è€…æ³¨ï¼šæ›´å¤šå‚è€ƒè§ https://github.com/ethereum/go-ethereum/wiki/Management-APIs